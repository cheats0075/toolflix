<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ToolFlix</title>
  <style>
    /* Reset e Base */
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;background:#0a0a0a;color:#e0e0e0;text-align:center;line-height:1.5;padding-bottom:50px}
    
    /* Cabe√ßalho */
    header{position:relative;padding:50px 20px 60px 20px;background:linear-gradient(180deg, rgba(30,30,30,0.55) 0%, rgba(30,30,30,0.6) 70%), url('https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg8agAZ1Hu-qcGTcIZDMd4o5F7MTdMYrd-Nf5uWnfNeqsevZzNbBOm4dzxTrNLup1IuQQeMmFlwFmtd8zMOi4Ntz7TGJIr1hYzAMyFyxusJj9W2VsIOF21yNX_ttPNlOdGWVKgcKjIUqmND/w800/FDFDFDFar.PNG') center/cover no-repeat; display:flex; flex-direction:column; align-items:flex-start; justify-content:center; border-bottom:3px solid #0ff; box-shadow:0 6px 20px rgba(0,255,255,0.2)}
    #logoToolFlix{font-family:'Impact', 'Arial Black', sans-serif;font-size:68px;font-weight:900;background:linear-gradient(90deg,#e50914 0%,#00ffff 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:2px 2px 12px rgba(0,0,0,0.8);margin:0 0 20px 20px;letter-spacing:4px}
    #searchBar{display:block;margin:0 0 0 20px;padding:10px 15px;width:250px;border-radius:8px;border:none;font-size:16px;background:#111;color:#fff;box-shadow:0 2px 6px rgba(0,255,255,0.2);transition:0.3s}
    #searchBar:focus{outline:none;box-shadow:0 0 12px #0ff}
    
    /* Container Bot√µes Topo */
    .top-actions{position:absolute; top:20px; right:20px; display:flex; flex-direction:column; align-items:flex-end; gap:10px; z-index:100}
    .top-buttons-row { display: flex; gap: 10px; }
    #adminBtn, #syncBtn{background:rgba(0,0,0,0.6); color:#fff; border:1px solid #0ff; padding:8px 18px; border-radius:20px; cursor:pointer; font-weight:700; transition:0.3s; text-decoration:none; font-size:14px}
    #adminBtn:hover, #syncBtn:hover{background:#0ff; color:#111}
    #adminBtn.active-mode{background:#e50914; border-color:#fff; color:#fff}
    #syncBtn{border-color:#e50914; background:rgba(229, 9, 20, 0.2)}
    #syncBtn:hover{background:#e50914; color:#fff}

    /* Bot√£o Pedir Jogo (Destacado) */
    #requestGameBtn {
        background: linear-gradient(45deg, #ff0000, #ff4757);
        color: #fff;
        border: none;
        padding: 10px 20px;
        border-radius: 20px;
        cursor: pointer;
        font-weight: 800;
        text-decoration: none;
        font-size: 14px;
        box-shadow: 0 4px 15px rgba(255, 0, 0, 0.4);
        transition: 0.3s;
        text-transform: uppercase;
        border: 1px solid rgba(255,255,255,0.3);
    }
    #requestGameBtn:hover {
        transform: scale(1.05);
        background: linear-gradient(45deg, #cc0000, #ff0000);
        box-shadow: 0 0 20px rgba(255, 0, 0, 0.6);
    }
    
    /* Barra de A√ß√µes */
    .action-bar{margin:20px 0; display:flex; justify-content:center; gap:10px; flex-wrap:wrap}
    .action-btn{padding:10px 20px; border-radius:6px; font-weight:700; cursor:pointer; border:none; transition:0.3s}
    #importBtn{background:#0ff; color:#111}
    #exportBtn{background:#444; color:#fff}
    #favFiltroBtn{background:#222; color:#fff; border: 1px solid #444}
    #favFiltroBtn.active{background:#ff4757; color:#fff; border-color:#ff4757; box-shadow: 0 0 15px #ff4757}
    
    /* Categorias */
    #categoriaBtns{margin:15px 0; display:flex; justify-content:center; flex-wrap:wrap; gap:5px; padding: 0 10px}
    .catBtn{background:#222;color:#fff;padding:8px 18px;border-radius:6px;font-weight:700;transition:0.3s; cursor:pointer; border:none; margin-bottom: 5px}
    .catBtn.active, .catBtn:hover{background:#0ff;color:#111}
    
    /* Cat√°logo */
    #catalogo{display:flex;flex-wrap:wrap;justify-content:center;gap:25px;margin:30px 0}
    .jogo{background:#111;border-radius:12px;padding:12px;width:190px;text-align:center;transition:transform 0.3s, box-shadow 0.3s;position:relative;box-shadow:0 4px 12px rgba(0,255,255,0.1);cursor:pointer}
    .jogo:hover{transform:scale(1.07);box-shadow:0 10px 25px rgba(0,255,255,0.3)}
    .jogo img{width:100%;border-radius:10px; aspect-ratio: 3/4; object-fit: cover;}
    .jogo p{margin-top:10px;font-weight:700;color:#0ff}
    
    /* Controles da Capa */
    .excluir-btn, .editar-btn{position:absolute; font-weight:700; border:none; cursor:pointer; transition:0.2s; z-index:10; display:none}
    .excluir-btn{top:5px; right:5px; background:red; color:#fff; width:28px; height:28px; border-radius:50%}
    .editar-btn{top:5px; left:5px; background:#0ff; color:#111; padding:4px 8px; border-radius:4px; font-size:10px}
    .fav-card-btn{position:absolute; bottom:45px; right:15px; background:rgba(0,0,0,0.8); color:rgba(255,255,255,0.5); width:35px; height:35px; border-radius:50%; font-size:18px; display:flex; align-items:center; justify-content:center; border: 1px solid rgba(255,255,255,0.2); transition: 0.3s; z-index:10}
    .fav-card-btn.active{color:#ff4757; background:#fff; border-color:#ff4757; box-shadow: 0 0 15px #ff4757; transform: scale(1.1)}
    .badge{position:absolute;top:38px;left:6px;padding:3px 6px;font-size:10px;font-weight:700;border-radius:4px;color:#111;z-index:5; text-transform: uppercase;}
    .ps2{background:#00ffff} 
    .ps3{background:#8a2be2; color:#fff} 
    .ps1{background:#ff007f; color:#fff}
    .youtube{background:#ff0000; color:#fff}
    .pc{background:#00ff00} 
    .roms{background:#ff8c00}
    
    #adminSection{display:none;background:#1a1a1a;padding:25px;border-radius:12px;width:320px;margin:20px auto;box-shadow:0 6px 20px rgba(0,255,255,0.2); border: 1px solid #333}
    #adminSection input, #adminSection select{display:block;margin:12px auto;padding:10px;width:90%;border-radius:6px;border:none;background:#111;color:#fff}
    #loginModal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.85);justify-content:center;align-items:center;z-index:9999}
    #loginBox{background:#111;border:1px solid #0ff;padding:25px;border-radius:12px;width:340px}
    #loginBox input{width:100%; padding:10px; background:#222; color:#fff; border:1px solid #333; border-radius:6px; margin-top:10px}
    
    @media(max-width:480px){ 
      #logoToolFlix{font-size:46px} 
      .jogo{width:45%} 
      .top-actions{top:10px; right:10px; gap:8px} 
      #adminBtn, #syncBtn, #requestGameBtn{padding:5px 10px; font-size:11px} 
    }
  </style>
</head>
<body>

<div class="top-actions">
    <div class="top-buttons-row">
        <a href="toolflix_backup.json" download="toolflix_backup.json" id="syncBtn">üì• Verificar novos jogos</a>
        <button id="adminBtn" type="button">‚öôÔ∏è Modo Admin</button>
    </div>
    <a href="https://youtu.be/BB0RbhXJWVc?si=goie7I_b2RLcvfkG" target="_blank" id="requestGameBtn">üéÆ Pedir um Jogo</a>
</div>

<header>
  <span id="logoToolFlix">ToolFlix</span>
  <input type="text" id="searchBar" placeholder="Pesquisar no cat√°logo...">
</header>

<div class="action-bar">
  <button id="importBtn" class="action-btn">Importar Dados</button>
  <button id="favFiltroBtn" class="action-btn">‚ù§Ô∏è Favoritos</button>
  <button id="exportBtn" class="action-btn" style="display:none">Exportar Backup</button>
</div>

<div id="categoriaBtns">
  <button class="catBtn active" data-cat="Todos">Todos</button>
  <button class="catBtn" data-cat="Jogos PS2">PS2</button>
  <button class="catBtn" data-cat="PS2 com Cheats">PS2 + Cheats</button>
  <button class="catBtn" data-cat="Jogos PS3">PS3</button>
  <button class="catBtn" data-cat="PS3 com Cheats">PS3 + Cheats</button>
  <button class="catBtn" data-cat="Jogos PS1">PS1</button>
  <button class="catBtn" data-cat="PS1 com Cheats">PS1 + Cheats</button>
  <button class="catBtn" data-cat="YouTube">YouTube</button>
  <button class="catBtn" data-cat="Jogos PC">PC</button>
  <button class="catBtn" data-cat="Fix SteamTools">Fix</button>
  <button class="catBtn" data-cat="Arquivos">Arquivos</button>
  <button class="catBtn" data-cat="Emuladores e Roms">Roms</button>
</div>

<section id="adminSection">
  <h3 id="adminTitle">Novo Item</h3>
  <input type="text" id="nomeJogo" placeholder="Nome do Item">
  <input type="text" id="linkCapa" placeholder="URL da Capa (Imagem)">
  <input type="text" id="linkJogo" placeholder="Link de Destino/Download">
  <select id="selectCategoria">
    <option value="Jogos PS2">Jogos PS2</option>
    <option value="PS2 com Cheats">PS2 com Cheats</option>
    <option value="Jogos PS3">Jogos PS3</option>
    <option value="PS3 com Cheats">PS3 com Cheats</option>
    <option value="Jogos PS1">Jogos PS1</option>
    <option value="PS1 com Cheats">PS1 com Cheats</option>
    <option value="YouTube">YouTube</option>
    <option value="Jogos PC">Jogos PC</option>
    <option value="Fix SteamTools">Fix SteamTools</option>
    <option value="Arquivos">Arquivos</option>
    <option value="Emuladores e Roms">Emuladores e Roms</option>
  </select>
  <button id="addJogoBtn" style="background:#0ff; width:100%; padding:10px; cursor:pointer; font-weight:700; border:none; border-radius:6px">SALVAR ‚úèÔ∏è</button>
</section>

<section id="catalogo"></section>

<div id="loginModal">
  <div id="loginBox">
    <h4 style="color:#0ff">Acesso Restrito</h4>
    <input id="loginInput" type="password" placeholder="Digite a senha">
    <div style="text-align:right; margin-top:15px">
      <button id="loginCancel" style="background:#333; color:#fff; padding:8px 15px; border-radius:6px; border:none; cursor:pointer">Sair</button>
      <button id="loginSubmit" style="background:#0ff; color:#111; padding:8px 15px; border-radius:6px; border:none; cursor:pointer; font-weight:700">Entrar</button>
    </div>
  </div>
</div>

<script>
(function(){
  var jogos=JSON.parse(localStorage.getItem('jogosPS2'))||[];
  var favoritos=JSON.parse(localStorage.getItem('toolflix_favs'))||[];
  var adminMode=false, apenasFavs=false, editIndex=null, catSelecionada='Todos';
  const catalogo = document.getElementById('catalogo');
  const searchBar = document.getElementById('searchBar');

  async function syncGithub() {
    const btn = document.getElementById('syncBtn');
    const originalText = btn.innerText;
    btn.innerText = "‚åõ Sincronizando...";
    try {
      const response = await fetch('toolflix_backup.json?t=' + Date.now());
      if (!response.ok) throw new Error();
      const data = await response.json();
      jogos = data;
      save();
      render();
      alert("‚úÖ Cat√°logo atualizado com sucesso!");
    } catch (e) {
      alert("‚ùå O arquivo 'toolflix_backup.json' n√£o foi encontrado no seu GitHub ou est√° com erro.");
    } finally {
      btn.innerText = originalText;
    }
  }

  function render(){
    catalogo.innerHTML='';
    const term = searchBar.value.toLowerCase();
    jogos.forEach((jogo, index) => {
      const isFav = favoritos.includes(jogo.nome);
      if((catSelecionada==='Todos' || jogo.categoria===catSelecionada) &&
          (jogo.nome.toLowerCase().includes(term)) &&
          (!apenasFavs || isFav)){
        const div = document.createElement('div');
        div.className = 'jogo';
        const bC = jogo.categoria.toLowerCase();
        let bClass = 'pc';
        if(bC.includes('ps2')) bClass = 'ps2';
        else if(bC.includes('ps3')) bClass = 'ps3';
        else if(bC.includes('ps1')) bClass = 'ps1';
        else if(bC.includes('youtube')) bClass = 'youtube';
        else if(bC.includes('roms')) bClass = 'roms';

        div.innerHTML = `
          <button class="excluir-btn" style="display:${adminMode?'block':'none'}" onclick="event.stopPropagation(); excluir(${index})">√ó</button>
          <button class="editar-btn" style="display:${adminMode?'block':'none'}" onclick="event.stopPropagation(); editar(${index})">EDITAR</button>
          <button class="fav-card-btn ${isFav?'active':''}" onclick="event.stopPropagation(); toggleFav('${jogo.nome}')">‚ù§</button>
          <span class="badge ${bClass}">${jogo.categoria}</span>
          <img src="${jogo.capa}" onclick="window.open('${jogo.link}', '_blank')">
          <p>${jogo.nome}</p>
        `;
        catalogo.appendChild(div);
      }
    });
  }

  function toggleAdminMode(forceOff = false){
    if(adminMode || forceOff){
      adminMode = false;
      document.getElementById('adminBtn').classList.remove('active-mode');
      document.getElementById('adminSection').style.display='none';
      document.getElementById('exportBtn').style.display='none';
      render();
    } else {
      document.getElementById('loginModal').style.display='flex';
      document.getElementById('loginInput').focus();
    }
  }

  window.toggleFav = (nome) => {
    if(favoritos.includes(nome)) favoritos = favoritos.filter(f => f !== nome);
    else favoritos.push(nome);
    localStorage.setItem('toolflix_favs', JSON.stringify(favoritos));
    render();
  };

  window.excluir = (i) => { if(confirm('Excluir este item?')){ jogos.splice(i,1); save(); render(); } };
  window.editar = (i) => {
    editIndex = i;
    const j = jogos[i];
    document.getElementById('nomeJogo').value=j.nome;
    document.getElementById('linkCapa').value=j.capa;
    document.getElementById('linkJogo').value=j.link;
    document.getElementById('selectCategoria').value=j.categoria;
    document.getElementById('adminSection').style.display='block';
    document.getElementById('adminTitle').textContent="Editando Item";
    window.scrollTo({top: 0, behavior: 'smooth'});
  };

  function save(){ localStorage.setItem('jogosPS2', JSON.stringify(jogos)); }

  const loginAction = () => {
    if(document.getElementById('loginInput').value === '@dm1nt1'){
      adminMode=true; 
      document.getElementById('adminBtn').classList.add('active-mode');
      document.getElementById('adminSection').style.display='block';
      document.getElementById('exportBtn').style.display='inline-block';
      document.getElementById('loginModal').style.display='none';
      document.getElementById('loginInput').value = '';
      render();
    } else alert('Senha Incorreta!');
  };

  window.addEventListener('keydown', (e) => { if(e.key === 'Escape') toggleAdminMode(true); });
  document.getElementById('loginSubmit').onclick = loginAction;
  document.getElementById('loginInput').onkeyup = (e) => { if(e.key==='Enter') loginAction(); };
  document.getElementById('adminBtn').onclick = () => toggleAdminMode();
  document.getElementById('syncBtn').onclick = (e) => { e.preventDefault(); syncGithub(); };
  document.getElementById('loginCancel').onclick = () => document.getElementById('loginModal').style.display='none';
  document.getElementById('addJogoBtn').onclick = () => {
    const n=document.getElementById('nomeJogo').value.trim(), c=document.getElementById('linkCapa').value.trim(), l=document.getElementById('linkJogo').value.trim(), cat=document.getElementById('selectCategoria').value;
    if(!n || !c || !l) return alert('Preencha tudo!');
    if(editIndex !== null){ jogos[editIndex]={nome:n, capa:c, link:l, categoria:cat}; editIndex=null; }
    else{ jogos.push({nome:n, capa:c, link:l, categoria:cat}); }
    save(); render();
    document.querySelectorAll('#adminSection input').forEach(i=>i.value='');
    document.getElementById('adminTitle').textContent="Novo Item";
  };
  document.getElementById('favFiltroBtn').onclick = function(){ apenasFavs = !apenasFavs; this.classList.toggle('active'); render(); };
  document.querySelectorAll('.catBtn').forEach(b => {
    b.onclick = () => {
      document.querySelectorAll('.catBtn').forEach(btn => btn.classList.remove('active'));
      b.classList.add('active');
      catSelecionada = b.dataset.cat;
      render();
    };
  });
  searchBar.oninput = render;
  document.getElementById('importBtn').onclick = () => {
    const inp = document.createElement('input'); inp.type='file';
    inp.onchange = e => {
      const reader = new FileReader();
      reader.onload = ev => { jogos = JSON.parse(ev.target.result); save(); render(); };
      reader.readAsText(e.target.files[0]);
    };
    inp.click();
  };
  document.getElementById('exportBtn').onclick = () => {
    const blob = new Blob([JSON.stringify(jogos)], {type:'application/json'});
    const a = document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='toolflix_backup.json'; a.click();
  };
  render();
})();
</script>
</body>
</html>